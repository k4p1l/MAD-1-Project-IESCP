{% extends "base.html" %} {% block body_class %}sponsor{% endblock %} {% block
content %}
<div class="navbar">
  <div></div>
  <div class="buttons">
    <a
      href="{{ url_for('sponsor.browse_influencers', campaign_id=campaign.id) }}"
      class="btn btn-purple cc cc-purple"
      >Find Influencer
    </a>
    <a
      href="{{ url_for('sponsor.dashboard') }}"
      class="btn btn-purple cc cc-purple"
      >Back</a
    >
    <a class="btn btn-purple cc cc-purple" href="{{url_for('sponsor.view_completed_ad_requests', campaign_id=campaign.id)}}">Completed Ad requests</a>
  </div>
</div>

<div class="campaignContainer">
  <h1 class="cc cc-purple text-center">Campaign</h1>
  <table>
    <tr>
      <th>Campaign Detail</th>
      <th>Information</th>
    </tr>
    <tr>
      <td>Name</td>
      <td>{{ campaign.name }}</td>
    </tr>
    <tr>
      <td>Description</td>
      <td>{{ campaign.description }}</td>
    </tr>
    <tr>
      <td>Start Date</td>
      <td>{{ campaign.start_date.strftime('%Y-%m-%d') }}</td>
    </tr>
    <tr>
      <td>End Date</td>
      <td>{{ campaign.end_date.strftime('%Y-%m-%d') }}</td>
    </tr>
    <tr>
      <td>Budget</td>
      <td>{{ campaign.budget }}</td>
    </tr>
    <tr>
      <td>Visibility</td>
      <td>{{ campaign.visibility }}</td>
    </tr>
    <tr>
      <td>Goals</td>
      <td>{{ campaign.goals }}</td>
    </tr>
  </table>
</div>


<div class="ad-request-container">
  <h1 class="cc cc-purple">ad Requests</h1>

  {% for ad_request in ad_requests %} 
  {% if ad_request.ad_request.completion_confirmed == False %}
  {% if loop.index0 % 4 == 0 %}
  <div class="ad-request-row">
    {% endif %}
  <div class="ad-request-table">
    <table>
      <tr>
        <th>Ad Request</th>
        <th>Details</th>
      </tr>
      <tr>
        <td>Influencer</td>
        <td>{{ ad_request.influencer_name }}</td>
      </tr>
      <tr>
        <td>Messages</td>
        <td>{{ ad_request.ad_request.messages }}</td>
      </tr>
      <tr>
        <td>Requirements</td>
        <td>{{ ad_request.ad_request.requirements }}</td>
      </tr>
      <tr>
        <td>Payment Amount</td>
        <td>{{ ad_request.ad_request.payment_amount }}</td>
      </tr>
      <tr>
        <td>Status</td>
        <td>{{ ad_request.ad_request.status }}</td>
      </tr>
      <tr>
        <td>Completion Status</td>
        <td>{{ ad_request.ad_request.completed }}</td>
      </tr>
      <tr>
        <td>
          <form action="{{ url_for('sponsor.confirm_completion',campaign_id=campaign.id, ad_request_id=ad_request.ad_request.id) }}" method="post">
            <button type="submit">Mark Completed</button>
          </form>
        </td>
      </tr>
    </table>
    </div>
    {% if loop.index0 % 4 == 3 or loop.last %}
    </div>
    {% endif %}
    {% endif %}
    {% endfor %}
  </div>

  {% endblock %}
</div>
