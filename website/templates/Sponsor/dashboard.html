{% extends "base.html" %} {% block title %}{{ 'Edit' if campaign else 'Create'
}} Campaign{% endblock %} {% block body_class %}sponsor{% endblock %} {% block
content %}

<div class="header">
  <p class="heading2 login-purple">The Dashboard</p>
  <div class="buttons">
    <a href="{{ url_for('sponsor.createCampaign') }}" class="Btn">Create +</a>
    <a href="viewCampaigns" class="Btn">View campaigns</a>
    <a href="{{ url_for('views.logout') }}" class="Btn">Logout</a>
  </div>
</div>

<h1 class="cc-purple cc text-center">active Campaigns</h1>

<table>
  <thead>
    <tr>
      <th>Name of Sponsor</th>
      <th>Start Date</th>
      <th>End Date</th>
      <th>Budget</th>
      <th>Campaign description</th>
    </tr>
  </thead>
  <tbody>
    {% for campaign in active_campaigns %}
    <tr>
      <td>
        <a
          href="{{ url_for('sponsor.viewCampaign', campaign_id=campaign.id) }}"
          class="link"
          >{{ campaign.name }}</a
        >
      </td>
      <td>{{ campaign.start_date.strftime('%Y-%m-%d') }}</td>
      <td>{{ campaign.end_date.strftime('%Y-%m-%d') }}</td>
      <td>Rs. {{ campaign.budget }}</td>
      <td>{{ campaign.description }}</td>
      <td>
        <form
          action="{{ url_for('sponsor.deleteCampaign', campaign_id=campaign.id) }}"
          method="POST"
          onsubmit="return confirm('Are you sure you want to delete this campaign?');"
        >
          <button type="submit">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              x="0px"
              y="0px"
              width="25"
              height="25"
              viewBox="0,0,256,256"
            >
              <g
                fill="none"
                fill-rule="nonzero"
                stroke="none"
                stroke-width="1"
                stroke-linecap="butt"
                stroke-linejoin="miter"
                stroke-miterlimit="10"
                stroke-dasharray=""
                stroke-dashoffset="0"
                font-family="none"
                font-weight="none"
                font-size="none"
                text-anchor="none"
                style="mix-blend-mode: normal"
              >
                <g transform="scale(5.33333,5.33333)">
                  <path
                    d="M34,12l-6,-6h-8l-6,6h-3v28c0,2.2 1.8,4 4,4h18c2.2,0 4,-1.8 4,-4v-28z"
                    fill="#2c0061"
                  ></path>
                  <path
                    d="M24.5,39h-1c-0.8,0 -1.5,-0.7 -1.5,-1.5v-19c0,-0.8 0.7,-1.5 1.5,-1.5h1c0.8,0 1.5,0.7 1.5,1.5v19c0,0.8 -0.7,1.5 -1.5,1.5zM31.5,39v0c-0.8,0 -1.5,-0.7 -1.5,-1.5v-19c0,-0.8 0.7,-1.5 1.5,-1.5v0c0.8,0 1.5,0.7 1.5,1.5v19c0,0.8 -0.7,1.5 -1.5,1.5zM16.5,39v0c-0.8,0 -1.5,-0.7 -1.5,-1.5v-19c0,-0.8 0.7,-1.5 1.5,-1.5v0c0.8,0 1.5,0.7 1.5,1.5v19c0,0.8 -0.7,1.5 -1.5,1.5z"
                    fill="#e3cdff"
                  ></path>
                  <path
                    d="M11,8h26c1.1,0 2,0.9 2,2v2h-30v-2c0,-1.1 0.9,-2 2,-2z"
                    fill="#e3cdff"
                  ></path>
                </g>
              </g>
            </svg>
          </button>
        </form>
      </td>
      <td>
        <form
          action="{{ url_for('sponsor.editCampaign', campaign_id=campaign.id) }}"
          method="POST"
          onsubmit="return confirm('Are you sure you want to edit this campaign?');"
        >
          <button type="submit">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              x="0px"
              y="0px"
              width="25"
              height="25"
              viewBox="0,0,256,256"
            >
              <g
                fill="#24004e"
                fill-rule="nonzero"
                stroke="none"
                stroke-width="1"
                stroke-linecap="butt"
                stroke-linejoin="miter"
                stroke-miterlimit="10"
                stroke-dasharray=""
                stroke-dashoffset="0"
                font-family="none"
                font-weight="none"
                font-size="none"
                text-anchor="none"
                style="mix-blend-mode: normal"
              >
                <g transform="scale(10.66667,10.66667)">
                  <path
                    d="M14.3,5.7l-11.3,11.3v4h4l11.3,-11.3zM21.7,6.2l-2,2l-3.9,-3.9l2,-2c0.3,-0.4 0.9,-0.4 1.3,-0.1l1.3,1.3l1.3,1.3c0.4,0.5 0.4,1.1 0,1.4z"
                  ></path>
                </g>
              </g>
            </svg>
          </button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<h2 class="text-2xl font-semibold mt-8 mb-4">Influencer Requests</h2>
<div class="flex flex-col gap-4 items-center">
  {% for request in campaign_requests %}
  <div class="border rounded p-4 w-full max-w-md bg-black shadow-md">
    <h2 class="text-xl font-bold">{{ request.campaign_name }}</h2>
    <p>Influencer: {{ request.influencer_name }}</p>
    <div class="mt-4 flex justify-between">
      <a
        href="{{ url_for('sponsor.viewCampaign', campaign_id=request.campaign_id) }}"
        class="bg-blue-500 text-white px-4 py-2 rounded"
        >View</a
      >
      <form
        action="{{ url_for('sponsor.request_action', request_id=request.id, action='accept') }}"
        method="post"
      >
        <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">
          Accept
        </button>
      </form>
      <form
        action="{{ url_for('sponsor.request_action', request_id=request.id, action='reject') }}"
        method="post"
      >
        <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded">
          Reject
        </button>
      </form>
    </div>
  </div>
  {% endfor %}
</div>
<h2 class="text-2xl font-semibold mt-8 mb-4">Sent Requests</h2>

<div class="flex flex-col gap-4 items-center">
  {% for request in sent_requests %}
  <div class="border rounded p-4 w-full max-w-md bg-white shadow-md">
    <h2 class="text-xl font-bold">{{ request.campaign.name }}</h2>
    <p>Influencer: {{ request.influencer_name }}</p>
    <div class="mt-4 flex justify-between">
      <a
        href="{{ url_for('sponsor.viewCampaign', campaign_id=request.campaign_id) }}"
        class="bg-blue-500 text-white px-4 py-2 rounded"
        >View</a
      >
    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}
