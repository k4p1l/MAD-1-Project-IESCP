{% extends "base.html" %}{% block body_class %} influencer {% endblock %} {%
block title %}Home{% endblock %} {% block content %}

<div class="navbar">
  <a class="mb-8 heading1 link" href="{{ url_for('views.logout') }}">LOGOUT</a>
  <div></div>
  <div></div>
  <div></div>
  <a href="{{ url_for('influencer.viewInfluencers') }}">
    <h1 class="text-center mb-8 heading1 link">Influencers</h1>
  </a>
  <a class="heading1 link" href="{{ url_for('influencer.activeCampaigns') }}"
    >aCTIVE Campaigns</a
  >
  <a class="heading1 link" href="{{ url_for('influencer.viewCampaigns') }}"
    >Find campaigns</a
  >
</div>

{% if not current_user.influencers %}
<div class="text-center">
  <a href="{{ url_for('influencer.addInfluencer') }}" class="cta link">
    COMPLETE YOUR PROFILE
  </a>
</div>

{% endif %}

<div class="hero">
  {% if influencer %}

  <div class="square square2">
    <div class="pfp-wrapper">
      <img
        src="{{ url_for('static', filename='uploads/' + influencer.profile_picture) }}"
        alt="{{ influencer.name }}'s profile picture"
        class="pfp"
      />
    </div>
    <div class="name">{{ influencer.name }}</div>
    <hr />
    <div class="attri">
      <p>{{ influencer.niche }}</p>
      <p>{{ influencer.reach }}</p>
    </div>

    <div class="more-info">
      <a
        href="{{ url_for('influencer.editInfluencer', influencer_id=influencer.id) }}"
      >
        <img
          src="{{ url_for('static', filename='Arrow.png') }}"
          class="arrow"
          alt="Arrow"
        />
      </a>
      <p class="info">{{ influencer.email }}</p>
      <p class="info">Platform: {{ influencer.platform }}</p>
      <p class="info">Reach/ Followers: {{ influencer.reach }}</p>
    </div>
  </div>

  <table class="prim-table prim-table-home">
    <caption class="heading2">
      Pending Requests
    </caption>
    <thead>
      <tr>
        <th class="prim-row">Campaign</th>
        <th class="prim-row">Sponsor</th>
        <th class="prim-row">Payment Amount</th>
      </tr>
    </thead>
    <tbody>
      {% for ad_request_details in ad_requests %} {% if
      ad_request_details.ad_request.status == "Pending" %}

      <tr class="prim-row">
        <td>{{ ad_request_details.campaign_name }}</td>
        <td>{{ ad_request_details.user_name }}</td>
        <td>{{ ad_request_details.ad_request.payment_amount }}</td>
        <td>
          <a
            class="link"
            href="{{ url_for('influencer.viewRequest', ad_request_id=ad_request_details.ad_request.id) }}"
            >View</a
          >
        </td>
        <td>
          <form
            action="{{ url_for('influencer.accept_ad_request', ad_request_id=ad_request_details.ad_request.id) }}"
            method="post"
          >
            <button class="link" type="submit">Accept</button>
          </form>
        </td>
        <td>
          <form
            action="{{ url_for('influencer.reject_ad_request', ad_request_id=ad_request_details.ad_request.id) }}"
            method="post"
          >
            <button class="link" type="submit">Reject</button>
          </form>
        </td>
        {% endif %} {% endfor %}
      </tr>
    </tbody>
  </table>
</div>
<table class="prim-table prim-table-home">
  <caption class="heading2">
    sent Requests
  </caption>
  <thead>
    <tr>
      <th class="prim-row">Campaign Name</th>
      <th class="prim-row">Requirements</th>
      <th class="prim-row">Message</th>
      <th class="prim-row">Requested Amount</th>
    </tr>
  </thead>
  <tbody>
    {% for campaignRequest in campaign_requests %} {% if
    campaignRequest.campaign_request.status == "Pending" %}

    <tr class="prim-row">
      <td>{{campaignRequest.campaign_name}}</td>
      <td>{{ campaignRequest.campaign_request.requirements }}</td>
      <td>{{ campaignRequest.campaign_request.messages }}</td>
      <td>{{ campaignRequest.campaign_request.payment_amount }}</td>
      <td>
        <a
          href="{{ url_for('influencer.edit_campaign_request', campaign_request_id=campaignRequest.campaign_request.id)}}"
          class="link"
          >Edit</a
        >
      </td>
      <td>
        <form
          action="{{ url_for('influencer.delete_campaign_request', campaign_request_id=campaignRequest.campaign_request.id) }}"
          method="POST"
          onsubmit="return confirm('Are you sure you want to delete the request?');"
        >
          <button class="link" type="submit">Delete</button>
        </form>
      </td>
      {% endif %} {% endfor %}
    </tr>
  </tbody>
</table>
{% endif %} {% endblock %}
